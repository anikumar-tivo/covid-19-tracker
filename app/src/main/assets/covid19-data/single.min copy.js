var $the_post=jQuery("#the-post"),$postContent=$the_post.find(".entry");$doc.ready(function(){"use strict";function e(e){var t;if(!e)var e=window.event;return e.which?t=3==e.which:e.button&&(t=2==e.button),t}function t(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e}if($doc.on("click","#toggle-post-button",function(){return $postContent.toggleClass("is-expanded"),jQuery(this).hide(),!1}),$doc.on("click",".print-share-btn",function(){return window.print(),!1}),tie.responsive_tables&&$the_post.find("table").wrap('<div class="table-is-responsive"></div>'),$doc.on("click",".share-links a:not(.email-share-btn)",function(){var e=jQuery(this).attr("href");return"#"!=e?(window.open(e,"TIEshare","height=450,width=760,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0"),!1):void 0}),tie.is_sticky_video&&jQuery("#the-sticky-video").length){var o=jQuery("#the-sticky-video"),a=o.offset().top,s=tie.sticky_desktop?60:0,s=$body.hasClass("admin-bar")?s+32:s,n=Math.floor(a+o.outerHeight()-s),i=$window.width();jQuery(".video-close-btn").click(function(){o.removeClass("video-is-sticky").addClass("stop-sticky")}),$window.on("resize load",function(){if(a=o.offset().top,n=Math.floor(a+o.outerHeight()-s),i=$window.width(),$body.hasClass("has-sidebar")){var e=jQuery(".sidebar"),t=e.width(),r=$body.hasClass("magazine2")&&$body.hasClass("sidebar-right")?40:15,l=$window.width()-(e.offset().left+t);o.find(".featured-area-inner").css({width:t,height:t*(9/16),right:l-r,left:"auto",top:s+20})}}).on("scroll",function(){o.hasClass("stop-sticky")||o.toggleClass("video-is-sticky",$window.scrollTop()>n&&i>992)})}if(tie.reading_indicator&&$postContent.length){var r=$postContent.height(),l=$window.height();$window.scroll(function(){var e=0,t=$postContent.offset().top,o=$window.scrollTop();o>t&&(e=100*(o-t)/(r-l)),jQuery("#reading-position-indicator").css("width",e+"%")})}var d=jQuery("#check-also-box");if(d.length){tie_animate_element(d);var c=$the_post.outerHeight(),h=!1;$window.scroll(function(){if(!h){var e=$window.scrollTop();e>c?d.addClass("show-check-also"):d.removeClass("show-check-also")}})}jQuery("#check-also-close").on("click",function(){return d.removeClass("show-check-also"),h=!0,!1}),tie.select_share&&($postContent.mousedown(function(o){$body.attr("mouse-top",o.clientY+window.pageYOffset),$body.attr("mouse-left",o.clientX),!e(o)&&t().length&&(jQuery(".fly-text-share").remove(),document.getSelection().removeAllRanges())}),$postContent.mouseup(function(o){var a=(jQuery(o.target),t()),s=a;if(a.length>3&&!e(o)){var n=$body.attr("mouse-top"),i=o.clientY+window.pageYOffset;parseInt(n)<parseInt(i)&&(i=n);var r=$body.attr("mouse-left"),l=o.clientX,d=parseInt(r)+(parseInt(l)-parseInt(r))/2,c=window.location.href.split("?")[0],h=114;a=a.substring(0,h),tie.twitter_username&&(h-=tie.twitter_username.length+2,a=a.substring(0,h),a=a+" @"+tie.twitter_username);var u="";tie.select_share_twitter&&(u+='<a href="https://twitter.com/share?url='+encodeURIComponent(c)+"&text="+encodeURIComponent(a)+"\" class='fa fa-twitter' onclick=\"window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;\"></a>"),tie.select_share_facebook&&tie.facebook_app_id&&(u+='<a href="https://www.facebook.com/dialog/feed?app_id='+tie.facebook_app_id+"&amp;link="+encodeURIComponent(c)+"&amp;quote="+encodeURIComponent(s)+"\" class='fa fa-facebook' onclick=\"window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;\"></a>"),tie.select_share_linkedin&&(u+='<a href="https://www.linkedin.com/shareArticle?mini=true&url='+encodeURIComponent(c)+"&summary="+encodeURIComponent(s)+"\" class='fa fa-linkedin' onclick=\"window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;\"></a>"),tie.select_share_email&&(u+='<a href="mailto:?body='+encodeURIComponent(s)+" "+encodeURIComponent(c)+"\" class='fa fa-envelope' onclick=\"window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;\"></a>"),""!=u&&$body.append('<div class="fly-text-share">'+u+"</div>"),jQuery(".fly-text-share").css({position:"absolute",top:parseInt(i)-60,left:parseInt(d)}).show()}})),$doc.on("mousemove",".taq-user-rate-active",function(e){var t=jQuery(this);if(t.hasClass("rated-done"))return!1;e.offsetX||(e.offsetX=e.clientX-jQuery(e.target).offset().left);var o=e.offsetX,a=t.width(),s=Math.round(o/a*100);t.find(".user-rate-image span").attr("data-user-rate",s).css("width",s+"%")}),$doc.on("click",".taq-user-rate-active",function(){var e=jQuery(this),t=e.parent(),o=t.find(".taq-count"),a=e.attr("data-id"),s=o.text();if(e.hasClass("rated-done")||e.hasClass("rated-in-progress"))return!1;e.addClass("rated-in-progress");var n=e.find(".user-rate-image span").data("user-rate");e.find(".user-rate-image").hide(),e.append('<span class="taq-load">'+tie.ajax_loader+"</span>"),n>=95&&(n=100);var i=5*n/100;return jQuery.post(taqyeem.ajaxurl,{action:"taqyeem_rate_post",post:a,value:i},function(){e.addClass("rated-done").attr("data-rate",n),e.find(".user-rate-image span").width(n+"%"),jQuery(".taq-load").fadeOut(function(){t.find(".taq-score").html(i),o.length?(s=parseInt(s)+1,o.html(s)):t.find("small").hide(),t.find("strong").html(taqyeem.your_rating),e.find(".user-rate-image").fadeIn()})},"html"),!1}),$doc.on("mouseleave",".taq-user-rate-active",function(){var e=jQuery(this);if(e.hasClass("rated-done"))return!1;var t=e.attr("data-rate");e.find(".user-rate-image span").css("width",t+"%")})});
